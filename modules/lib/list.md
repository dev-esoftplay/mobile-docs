# LibList

This component provides a performant list using `@shopify/flash-list`. It's a wrapper around `FlashList` with some added conveniences and sensible defaults.

## Installation

This component relies on `@shopify/flash-list` and `esoftplay`. Ensure you have them installed:

```bash
npm install @shopify/flash-list esoftplay
# or
yarn add @shopify/flash-list esoftplay
```

## Usage

```javascript
import { LibList } from 'esoftplay/cache/lib/list/import';

<LibList
  data={myData}
  renderItem={(item, index) => <MyListItem item={item} />}
  keyExtractor={(item, index) => item.id.toString()}
  // ... other props
/>
```

## Props

| Prop                     | Type                                  | Required | Description                                                                                                                                                                                                                                                                                                                                                                                    |
| ------------------------ | ------------------------------------- | -------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `bounces`                | `boolean`                             | No       | Whether the list should bounce when it reaches the end.                                                                                                                                                                                                                                                                                                                                                            |
| `staticHeight`           | `number`                              | No       | Estimated height of list items. Used for performance optimization. When provided it implies `getItemLayout` is implemented for performance enhancement.                                                                                                                                                                                                                                                                                                                                                  |
| `ItemSeparatorComponent` | `any`                                 | No       | Component to render between list items.                                                                                                                                                                                                                                                                                                                                                                          |
| `ListEmptyComponent`     | `any`                                 | No       | Component to display when the list is empty.                                                                                                                                                                                                                                                                                                                                                                       |
| `ListFooterComponent`    | `any`                                 | No       | Component to display at the end of the list.                                                                                                                                                                                                                                                                                                                                                                        |
| `ListHeaderComponent`    | `any`                                 | No       | Component to display at the beginning of the list.                                                                                                                                                                                                                                                                                                                                                                 |
| `columnWrapperStyle`     | `any`                                 | No       | Style for wrapping items in columns (used with `numColumns`).                                                                                                                                                                                                                                                                                                                                                      |
| `keyboardShouldPersistTaps` | `boolean \| "always" \| "never" \| "handled"` | No       | Controls when the keyboard should be dismissed when tapping outside of text inputs.                                                                                                                                                                                                                                                                                                                                                            |
| `data`                   | `any[]`                               | Yes      | The data source for the list.                                                                                                                                                                                                                                                                                                                                                                                     |
| `pagingEnabled`          | `boolean`                             | No       | Whether paging should be enabled.                                                                                                                                                                                                                                                                                                                                                                            |
| `extraData`              | `any`                                 | No       | A prop that forces a re-render when it changes.                                                                                                                                                                                                                                                                                                                                                                   |
| `getItemLayout`          | `(data: any, index: number) => LibListItemLayout` | No       | Function to calculate the layout of items.  Required for `FlashList` performance optimization, *especially* when `staticHeight` is not defined.  When `staticHeight` is supplied, this will be automatically handled.                                                                                                                                                                                                                                                                      |
| `horizontal`             | `boolean`                             | No       | Whether the list should be displayed horizontally.                                                                                                                                                                                                                                                                                                                                                                |
| `initialNumToRender`     | `number`                              | No       | Number of items to render initially.                                                                                                                                                                                                                                                                                                                                                                            |
| `initialScrollIndex`     | `number`                              | No       | Index to scroll to initially.                                                                                                                                                                                                                                                                                                                                                                                   |
| `keyExtractor`           | `(item: any, index: number) => string` | Yes      | Function to extract a unique key for each item.                                                                                                                                                                                                                                                                                                                                                                |
| `legacyImplementation`   | `boolean`                             | No       | Whether to use the legacy implementation of FlatList.                                                                                                                                                                                                                                                                                                                                                           |
| `numColumns`             | `number`                              | No       | Number of columns for grid layout.                                                                                                                                                                                                                                                                                                                                                                                |
| `onScroll`               | `(e: any) => void`                    | No       | Callback function called when the list is scrolled.                                                                                                                                                                                                                                                                                                                                                           |
| `scrollEventThrottle`    | `number`                              | No       | Number of milliseconds to throttle the `onScroll` event.                                                                                                                                                                                                                                                                                                                                                         |
| `onEndReached`           | `(() => void) \| null`                 | No       | Callback function called when the list reaches the end (for infinite scrolling).                                                                                                                                                                                                                                                                                                                                   |
| `onEndReachedThreshold`  | `number \| null`                      | No       | Distance from the end of the list (as a fraction of the list's visible length) before `onEndReached` is called.                                                                                                                                                                                                                                                                                               |
| `onRefresh`              | `(() => void) \| null`                 | No       | Callback function called when the list is refreshed.                                                                                                                                                                                                                                                                                                                                                             |
| `refreshing`             | `boolean \| null`                      | No       | Whether the list is currently refreshing.                                                                                                                                                                                                                                                                                                                                                                       |
| `renderFooter`           | `() => any`                          | No       | Function to render a component at the end of the list.                                                                                                                                                                                                                                                                                                                                                          |
| `renderItem`             | `(item: any, index: number) => any`   | Yes      | Function to render each list item.                                                                                                                                                                                                                                                                                                                                                                               |
| `viewabilityConfig`      | `any`                                 | No       | Configuration for item viewability tracking.                                                                                                                                                                                                                                                                                                                                                                    |
| `style`                  | `ContentStyle`                         | No       | Style for the list's content.                                                                                                                                                                                                                                                                                                                                                                                     |
| `removeClippedSubviews`  | `boolean`                             | No       | Whether to remove clipped subviews. Improves performance for lists with many items.                                                                                                                                                                                                                                                                                                                                 |

## Functionality

1. **`FlashList` Wrapper:** This component is a wrapper around the `@shopify/flash-list` component, providing a simpler interface and sensible defaults.

2. **Required Props:** The `data`, `keyExtractor`, and `renderItem` props are required for the list to function.

3. **Performance Optimizations:** The component supports performance optimizations like `getItemLayout` (automatically handled when `staticHeight` is supplied), `initialNumToRender`, and `removeClippedSubviews`.  It also encourages the use of `staticHeight` for improved performance.

4. **Event Handling:** The component passes through event handlers like `onScroll`, `onEndReached`, and `onRefresh`.

5. **Customization:**  The component supports customization through various props like `ListEmptyComponent`, `ListFooterComponent`, `ItemSeparatorComponent`, and others.

6. **Scrolling:**  The `scrollToIndex` method allows programmatically scrolling to a specific item.

## Important Considerations

* **`@shopify/flash-list` Dependency:**  This component requires the `@shopify/flash-list` library.
* **Key Extractor:** It's *crucial* to provide a correct and unique `keyExtractor` function.  This is essential for `FlashList` to efficiently update the list.
* **Performance:**  For large lists, it's highly recommended to use the `getItemLayout` prop (or supply `staticHeight`) for optimal performance.  This allows `FlashList` to calculate the layout of items without having to measure them.  If the items are of variable height, you must provide a `getItemLayout` function to calculate the dynamic heights.
* **`renderItem` Function:** The `renderItem` function is responsible for rendering each item in the list.  It receives the item data and the index as arguments.
* **Component Lifecycle:** The component extends `LibComponent` from `esoftplay`.
* **Scrolling:** The `scrollToIndex` method allows you to scroll to a specific index programmatically.
* **Accessibility:** Consider accessibility implications. Use appropriate ARIA attributes and ensure that the list is navigable using assistive technologies.  If items are interactive, make sure they are accessible via keyboard.  If the content changes dynamically, make sure to notify users of those changes.

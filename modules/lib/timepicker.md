# LibTimepicker

This component provides a time picker interface that allows users to select a time. It supports 12-hour and 24-hour modes, different time precision levels (hour, hour:minute, hour:minute:second), and allows setting minimum and maximum time limits.

## Installation

This component relies on `esoftplay` and `expo-linear-gradient`. Make sure you have them installed:

```bash
npm install esoftplay expo-linear-gradient
# or
yarn add esoftplay expo-linear-gradient
```

## Usage

```javascript
import { LibTimepicker } from 'esoftplay/cahce/lib/timepicker/import';

<LibTimepicker
  selectedTime="10:30:00" // Initial selected time (HH:MM:SS format)
  minTime="09:00:00" // Optional: Minimum selectable time
  maxTime="18:00:00" // Optional: Maximum selectable time
  mode={24} // Optional: 12 or 24 hour mode (default: 24)
  type="hourMinuteSecond" // Optional: Time precision ("hour", "hourMinute", "hourMinuteSecond")
  onTimeChange={(time) => console.log("Time changed:", time)} // Callback for time changes
/>
```

## Props

| Prop             | Type                                  | Required | Description                                                                                                                                                                                                                                                                                                                                                                                    |
| ---------------- | ------------------------------------- | -------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `selectedTime`   | `TimeFormat` (`HH:MM:SS`) | Yes      | The initially selected time.                                                                                                                                                                                                                                                                                                                                                                            |
| `onTimeChange`   | `(time: TimeFormat) => void`            | Yes      | Callback function called when the selected time changes. Receives the new time in `HH:MM:SS` format.                                                                                                                                                                                                                                                                                                                                                              |
| `minTime`        | `TimeFormat` (`HH:MM:SS`) | No       | Optional: The minimum selectable time.                                                                                                                                                                                                                                                                                                                                                                         |
| `maxTime`        | `TimeFormat` (`HH:MM:SS`) | No       | Optional: The maximum selectable time.                                                                                                                                                                                                                                                                                                                                                                         |
| `mode`           | `24 \| 12`                            | No       | Optional: Specifies whether to use 24-hour or 12-hour format. Defaults to 24.                                                                                                                                                                                                                                                                                                                                                                                     |
| `type`           | `"hour" \| "hourMinute" \| "hourMinuteSecond"` | No       | Optional: Specifies the precision of the time picker.  `"hour"` shows only the hour picker, `"hourMinute"` shows hour and minute, and `"hourMinuteSecond"` shows hour, minute, and second. Defaults to `"hourMinuteSecond"`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    0 |

## Functionality

1.  **Scrollable Pickers:** The component uses `LibScrollpicker` components for selecting the hour, minute, and second.

2.  **Time Format:** The `selectedTime`, `minTime`, and `maxTime` props use the `HH:MM:SS` format.

3.  **12/24 Hour Mode:** The `mode` prop controls whether the time picker displays in 12-hour or 24-hour format.

4.  **Time Precision:** The `type` prop controls the level of precision (hour, hour:minute, or hour:minute:second).

5.  **Min/Max Time Limits:** The `minTime` and `maxTime` props allow you to set limits on the selectable time range.

6.  **"Done" Button:** A "Done" button allows the user to confirm their selection and triggers the `onTimeChange` callback.

7.  **Linear Gradient Overlay:** A linear gradient overlay is used to visually highlight the selected time range.

8. **Scrolling to Selected Time:** The `useEffect` hook and the `scrollTo` function ensure that the scroll pickers are initially scrolled to the `selectedTime` when the component mounts or when the `selectedTime` prop changes.  It also handles the logic for scrolling to the `minTime` or `maxTime` if the initially `selectedTime` is outside the allowed range.

## Important Considerations

*   **`LibScrollpicker`:** This component relies on the `LibScrollpicker` component for the scrollable pickers. Make sure it is correctly implemented and available.
*   **Time Format:**  Use the `HH:MM:SS` format consistently for the `selectedTime`, `minTime`, and `maxTime` props.
*   **Min/Max Time Handling:** The component correctly handles cases where the initially selected time is outside the allowed `minTime` and `maxTime` range.
*   **Styling:** The styling of the time picker can be customized further.
*   **Accessibility:** Consider accessibility. Use appropriate ARIA attributes to make the time picker accessible to users with visual impairments.
* **`useSafeState`:**  The `useSafeState` hook from `esoftplay` is used to manage the `selectedTime` state. This hook likely ensures that state updates are handled correctly, especially in situations where the component might be unmounted before the state update is processed.  This is a good practice to prevent memory leaks and unexpected behavior.
* **Refs:** The `refHour`, `refMinute`, and `refSecond` refs are used to access the `LibScrollpicker` components and programmatically scroll them to the correct positions.
* **Conditional Rendering:** The component conditionally renders the minute and second pickers based on the `type` prop.  This allows you to create time pickers with different levels of precision.
* **Item Renderer:** The `itemRenderer` function customizes the appearance of the items in the scroll pickers.
* **Linear Gradient:** The linear gradient overlay adds a nice visual touch to the time picker.  You can customize the colors and stops of the gradient to match your app's theme.
* **"Done" Button Functionality:** The "Done" button calls the `onTimeChange` callback with the currently selected time.  Make sure you handle this callback appropriately in your parent component.
